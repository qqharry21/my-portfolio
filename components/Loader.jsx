/** @format */

import React, { useState, useEffect } from 'react';
import { motion } from 'framer-motion';
import { useTheme } from 'next-themes';
import { useMediaQuery } from 'react-responsive';

const container = {
  show: {
    transition: {
      delayChildren: 0.3,
      staggerChildren: 0.1,
    },
  },
};

const svgVariants = {
  hidden: { opacity: 0, y: 50 },
  show: {
    opacity: 1,
    y: 0,
    transition: {
      ease: [0.6, 0.01, -0.05, 0.95],
      duration: 3,
    },
  },
  exit: {
    scale: 0,
    opacity: 0,
    transition: {
      ease: 'easeInOut',
      duration: 1.2,
    },
  },
};

const pathVariants = {
  hidden: {
    opacity: 0,
    pathLength: 0,
  },
  show: {
    opacity: 1,
    pathLength: 1,
    transition: {
      duration: 2,
      delay: 0.3,
      ease: 'easeInOut',
    },
  },
};

const bgVariants = {
  hidden: {
    opacity: 0,
  },
  show: {
    opacity: 1,
    transition: {
      duration: 0.8,
      delay: 2.5,
      ease: 'easeInOut',
    },
  },
};

const shadowVariants = {
  hidden: {
    opacity: 0,
  },
  show: {
    opacity: 1,
    transition: {
      duration: 0.5,
      delay: 2.5,
      ease: 'easeInOut',
    },
  },
};

const Loader = ({ setLoading }) => {
  const { theme } = useTheme();
  const [mounted, setMounted] = useState(false);
  const isTablet = useMediaQuery({ query: '(max-width: 768px)' });
  useEffect(() => {
    setMounted(true);
  }, []);

  if (!mounted) return null;
  return (
    <motion.div
      variants={container}
      onAnimationComplete={() => {
        setLoading(false);
      }}
      initial='hidden'
      animate='show'
      exit='exit'>
      <Logo isTablet={isTablet} theme={theme} />
    </motion.div>
  );
};

const Logo = ({ isTablet, theme }) => {
  return (
    <motion.div variants={svgVariants}>
      <motion.svg
        xmlns='http://www.w3.org/2000/svg'
        width={isTablet ? '300' : '700'}
        viewBox='0 0 375 375'
        height={isTablet ? '300' : '700'}
        version='1.0'>
        <motion.path
          variants={bgVariants}
          fill={theme === 'light' ? '#23283e' : '#1A202C'}
          d='M 187.433594 38.183594 C 105.003906 38.183594 38.183594 105.003906 38.183594 187.433594 C 38.183594 269.859375 105.003906 336.683594 187.433594 336.683594 C 269.859375 336.683594 336.683594 269.859375 336.683594 187.433594 C 336.683594 105.003906 269.859375 38.183594 187.433594 38.183594'
        />
        <motion.g fill={theme === 'light' ? '#000' : '#ACB4BF'} variants={shadowVariants}>
          <g>
            <g>
              <motion.path
                variants={pathVariants}
                d='M 177.296875 -123.484375 C 187.953125 -163 198.875 -202.253906 209.792969 -241.507812 C 211.351562 -247.226562 212.910156 -252.6875 213.429688 -258.664062 C 205.113281 -262.042969 202.253906 -261.523438 199.394531 -255.285156 C 194.714844 -243.585938 189.773438 -231.890625 186.394531 -219.671875 C 176.257812 -184.574219 166.898438 -149.480469 157.277344 -114.382812 C 156.238281 -110.484375 155.199219 -106.84375 154.160156 -103.726562 C 152.078125 -102.6875 151.039062 -102.167969 150 -101.90625 C 124.003906 -95.148438 98.007812 -88.386719 71.75 -81.890625 C 70.191406 -81.367188 68.109375 -81.890625 65.511719 -81.890625 C 68.109375 -91.769531 70.191406 -101.125 72.53125 -110.226562 C 74.871094 -119.324219 77.210938 -128.683594 79.550781 -137.78125 C 81.628906 -147.140625 83.96875 -156.238281 86.308594 -165.597656 C 88.386719 -174.695312 92.027344 -183.535156 92.289062 -192.894531 C 85.789062 -195.492188 84.230469 -195.753906 81.628906 -194.714844 C 77.988281 -193.414062 75.910156 -190.554688 74.871094 -187.175781 C 72.789062 -181.457031 70.710938 -175.996094 69.152344 -170.277344 C 63.429688 -148.441406 57.972656 -126.601562 52.511719 -104.765625 C 49.914062 -94.367188 47.3125 -83.96875 44.972656 -73.570312 C 37.433594 -70.710938 30.15625 -68.109375 23.398438 -64.992188 C 16.636719 -61.613281 8.320312 -60.050781 4.160156 -51.214844 C 6.5 -50.171875 8.839844 -48.351562 10.660156 -48.613281 C 14.816406 -48.875 19.238281 -49.914062 23.398438 -50.953125 C 28.855469 -52.773438 33.796875 -55.890625 40.554688 -56.414062 C 40.035156 -53.03125 39.773438 -50.171875 39.253906 -47.574219 C 34.835938 -23.398438 29.894531 0.519531 25.476562 24.695312 C 24.4375 31.195312 24.175781 37.953125 24.175781 44.714844 C 24.175781 51.214844 27.296875 52.511719 34.316406 49.394531 C 34.574219 37.433594 54.074219 -44.714844 61.351562 -63.429688 C 62.132812 -63.953125 63.171875 -64.730469 64.210938 -64.992188 C 91.246094 -72.789062 118.285156 -80.589844 145.320312 -88.386719 C 146.621094 -88.648438 148.179688 -88.128906 150 -87.867188 C 149.480469 -85.007812 149.21875 -82.667969 148.699219 -80.328125 C 144.800781 -64.210938 140.640625 -48.09375 137 -31.976562 C 130.503906 -3.378906 124.261719 25.214844 118.285156 54.074219 C 116.984375 60.832031 116.984375 68.109375 116.984375 75.128906 C 116.984375 78.507812 118.285156 79.03125 124.261719 78.507812 C 131.28125 49.914062 138.300781 21.058594 145.839844 -7.539062 C 153.378906 -36.65625 160.660156 -65.769531 169.496094 -94.367188 C 178.335938 -96.445312 186.394531 -98.527344 194.714844 -100.347656 C 199.652344 -101.386719 204.59375 -102.425781 209.792969 -100.347656 C 213.429688 -99.046875 217.332031 -99.566406 220.710938 -101.90625 C 221.230469 -105.804688 219.152344 -107.625 216.550781 -108.664062 C 213.691406 -109.964844 210.3125 -111.003906 207.453125 -110.746094 C 199.914062 -110.484375 192.375 -109.707031 184.835938 -108.925781 C 181.457031 -108.664062 178.074219 -108.144531 173.917969 -107.886719 C 173.917969 -113.863281 175.996094 -118.804688 177.296875 -123.484375 Z M 177.296875 -123.484375'
                transform='translate(80.848 282.492)'
              />
            </g>
          </g>
        </motion.g>
        <motion.path
          variants={pathVariants}
          transform='matrix(.75 0 0 .75 69.359 11.503)'
          fill={theme === 'light' ? '#a9aaaa' : 'none'}
          d='M 236.354658 181.319063 C 250.573409 128.683643 265.125493 76.303431 279.682786 24.006553 C 281.797369 16.391969 283.911953 9.110719 284.589036 1.07426 C 273.505702 -3.410116 269.69841 -2.733032 265.891118 5.641968 C 259.625493 21.214886 253.026534 36.782595 248.542159 53.11593 C 235.000491 99.912808 222.56299 146.709686 209.698406 193.506564 C 208.344239 198.668023 206.906739 203.579481 205.552572 207.725315 C 202.760906 209.079482 201.406739 209.756565 199.96403 210.095107 C 165.354653 219.147191 130.661942 228.12115 95.625482 236.834692 C 93.594232 237.511775 90.802565 236.834692 87.333815 236.834692 C 90.802565 223.631566 93.594232 211.194065 96.72444 199.006564 C 99.854649 186.907605 102.984857 174.381563 106.031733 162.282604 C 108.828608 149.839894 111.958816 137.657602 115.089025 125.214893 C 117.880692 113.0326 122.703609 101.266975 123.04215 88.829474 C 114.411941 85.355515 112.297358 85.016974 108.828608 86.37114 C 104.000482 88.15239 101.208816 91.959682 99.854649 96.444058 C 97.062982 104.058641 94.271315 111.339892 92.240065 118.954476 C 84.536939 148.063853 77.260897 177.17323 69.984855 206.287815 C 66.516105 220.162816 63.047355 234.043025 60.000479 247.923234 C 49.927562 251.730526 40.198395 255.199276 31.224436 259.34511 C 22.172352 263.829485 11.08381 265.944069 5.583809 277.709695 C 8.630684 279.063861 11.760893 281.516986 14.219226 281.178445 C 19.719227 280.839903 25.641102 279.485736 31.224436 278.048236 C 38.505686 275.678444 45.021312 271.444069 54.073396 270.766986 C 53.396312 275.256569 53.057771 279.063861 52.297354 282.532612 C 46.458812 314.772197 39.859853 346.678449 33.932769 378.918035 C 32.578603 387.636785 32.240061 396.605536 32.240061 405.65762 C 32.240061 414.293037 36.385895 415.985745 45.781729 411.839912 C 46.12027 395.928452 72.099439 286.339903 81.833814 261.459693 C 82.849439 260.699277 84.198398 259.683652 85.641106 259.34511 C 121.687984 248.933651 157.740069 238.5274 193.786947 228.12115 C 195.479655 227.782608 197.599447 228.459691 199.96403 228.881566 C 199.292155 232.688858 198.953614 235.735733 198.27653 238.865942 C 193.02653 260.360735 187.52653 281.855528 182.703613 303.350321 C 173.984862 341.51699 165.693195 379.595118 157.740069 418.100329 C 155.964027 427.069079 155.964027 436.803455 155.964027 446.194081 C 155.964027 450.678456 157.740069 451.355539 165.693195 450.678456 C 175.000487 412.516995 184.396321 374.095118 194.46403 335.928448 C 204.536947 297.089904 214.182781 258.329485 226.03174 220.162816 C 237.792158 217.371149 248.542159 214.662815 259.625493 212.20969 C 266.22966 210.855524 272.828618 209.418023 279.682786 212.20969 C 284.589036 213.902399 289.750495 213.225315 294.240078 210.095107 C 295.000495 204.933648 292.208828 202.475315 288.734869 201.121148 C 284.927578 199.345106 280.443202 197.990939 276.63591 198.329481 C 266.568201 198.668023 256.495284 199.683648 246.427575 200.782606 C 241.937991 201.121148 237.453616 201.798231 231.870282 202.136773 C 231.870282 194.183647 234.661949 187.584689 236.354658 181.319063 Z M 236.354658 181.319063'
          stroke='#FFF'
          strokeWidth={theme === 'light' ? '8' : '10'}
        />
      </motion.svg>
    </motion.div>
  );
};

export default Loader;
